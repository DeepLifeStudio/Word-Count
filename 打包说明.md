# 应用打包说明

本文档说明如何将 Word 字数统计工具打包成独立应用程序。

---

## 🍎 Mac 应用打包（.app）

### 自动打包（推荐）

我已经为你准备好了自动打包脚本，只需要：

1. 打开"终端"应用
2. 进入项目文件夹：
```bash
cd /Users/你的用户名/Documents/Development/word-count
```

3. 运行打包脚本：
```bash
./打包Mac应用.sh
```

4. 等待几分钟，完成后会在 `dist` 文件夹里生成 `Word字数统计.app`

### 手动打包步骤

如果自动脚本不工作，可以手动打包：

1. **安装打包工具**
```bash
pip3 install pyinstaller
```

2. **创建图标文件（可选）**
   - 准备一个 PNG 图片（512x512 像素）
   - 使用 macOS 自带的"预览"转换为 .icns 格式

3. **执行打包命令**
```bash
pyinstaller --name="Word字数统计" \
    --windowed \
    --onefile \
    --add-data "templates:templates" \
    --add-data "static:static" \
    word_count_web.py
```

4. **找到应用**
   - 打包完成后，在 `dist` 文件夹里找到 `Word字数统计.app`
   - 双击测试是否能正常运行

### 注意事项

- 首次打开可能需要在"系统偏好设置 → 安全性与隐私"中允许运行
- 应用体积约 50-100MB（包含了完整的 Python 运行环境）
- 打包后的应用可以拷贝到其他 Mac 电脑使用

---

## 🪟 Windows 应用打包（.exe）

**重要提示：打包 Windows 应用必须在 Windows 电脑上进行！**

### 准备工作

1. 在 Windows 电脑上安装 Python 3
   - 下载地址：https://www.python.org/downloads/
   - 安装时勾选"Add Python to PATH"

2. 安装依赖
```cmd
pip install flask python-docx pyinstaller
```

### 打包步骤

1. **将项目文件夹复制到 Windows 电脑**

2. **打开命令提示符（CMD）**
   - 按 Win + R
   - 输入 `cmd` 并回车

3. **进入项目目录**
```cmd
cd C:\path\to\word-count
```

4. **执行打包命令**
```cmd
pyinstaller --name="Word字数统计" ^
    --windowed ^
    --onefile ^
    --add-data "templates;templates" ^
    --add-data "static;static" ^
    word_count_web.py
```

> ⚠️ 注意：Windows 使用分号 `;` 而不是冒号 `:`

5. **找到可执行文件**
   - 在 `dist` 文件夹里找到 `Word字数统计.exe`
   - 双击测试

### 添加图标（可选）

1. 准备 `.ico` 格式图标文件
2. 在打包命令中添加：
```cmd
--icon=icon.ico
```

### Windows 打包注意事项

- 杀毒软件可能误报，需要添加信任
- 打包后的 .exe 体积约 50-100MB
- 可以使用 Inno Setup 制作安装程序

---

## 📦 分发建议

### Mac 应用分发

1. **压缩应用**
```bash
cd dist
zip -r "Word字数统计_Mac.zip" "Word字数统计.app"
```

2. **分享给其他人**
   - 建议同时提供 README.md
   - 说明首次打开的安全设置步骤

### Windows 应用分发

1. **压缩可执行文件**
   - 将 `Word字数统计.exe` 压缩成 zip
   - 或使用 Inno Setup 制作安装包

2. **提供使用说明**
   - 说明可能的杀毒软件提示
   - 提供联系方式以便用户反馈问题

---

## 🛠️ 故障排除

### Mac 打包常见问题

**Q: 提示"找不到 pyinstaller"**
```bash
pip3 install --user pyinstaller
export PATH="$HOME/Library/Python/3.x/bin:$PATH"
```

**Q: 打包后的应用无法打开**
- 尝试从终端运行以查看错误信息
- 检查是否缺少依赖文件

**Q: 应用体积太大**
- 使用 `--onefile` 会增大体积
- 可以改用 `--onedir` 生成文件夹形式的应用

### Windows 打包常见问题

**Q: 杀毒软件报毒**
- 这是正常现象（PyInstaller 打包的程序经常被误报）
- 添加到杀毒软件白名单
- 或者提交到杀毒软件厂商进行复检

**Q: 应用崩溃**
- 检查是否正确添加了 templates 和 static 文件夹
- 确认 Python 版本兼容性（建议 Python 3.8+）

---

## 📝 技术说明

### 为什么使用 PyInstaller？

- **跨平台**：支持 Mac、Windows、Linux
- **独立运行**：打包后不需要安装 Python
- **易于使用**：命令简单，文档完善

### 打包后的应用结构

```
应用程序/
├── 嵌入的 Python 解释器
├── 项目代码
├── templates/（网页模板）
├── static/（样式和脚本）
└── 所有依赖库
```

---

**祝打包成功！** 🎉
